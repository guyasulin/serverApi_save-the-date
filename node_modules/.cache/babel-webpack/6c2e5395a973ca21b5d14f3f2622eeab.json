{"ast":null,"code":"import { switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"./../../shared/services/requset-handler.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./../../dashboard/components/event-details/services/event-details.service\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(http, requestHandler, router, eventDetailsService) {\n      this.http = http;\n      this.requestHandler = requestHandler;\n      this.router = router;\n      this.eventDetailsService = eventDetailsService;\n    } // signup$ = this.http.post<User>(\"http://localhost:3000/users/signup\",{...user}).pipe(\n    //   // tap(data => console.log(\"Products: \", JSON.stringify(data))),\n    //   // catchError(this.handleError)\n    // );\n\n\n    login(email, password) {\n      return this.requestHandler.post('/users/login', {\n        email,\n        password\n      });\n    }\n\n    signup(user) {\n      return this.http.post('http://localhost:3000/users/signup', Object.assign({}, user)).pipe(switchMap(user => {\n        const newEvent = user.result;\n        console.log(newEvent);\n        return this.eventDetailsService.createEvent(newEvent);\n      }));\n    }\n\n    setUserLocalStorage(user) {\n      localStorage.setItem('userData', JSON.stringify(user));\n    }\n\n    getUserLocalStorage() {\n      const userData = localStorage.getItem('userData');\n\n      if (userData) {\n        const user = JSON.parse(userData);\n        this.router.navigateByUrl('/dashboard');\n        return user;\n      }\n\n      this.router.navigateByUrl('/login');\n      return null;\n    }\n\n    logout() {\n      localStorage.removeItem('userData');\n    }\n\n    getErrorMessage(message) {\n      switch (message) {\n        case 'Auth failed':\n          return 'אימייל או סיסמא לא נכונים';\n\n        case 'Email exists':\n          return 'אימייל קיים במערכת';\n\n        default: // return 'בעיה בגישה לאתר, ניתן ליצור קשר אם שרות הלקוחות';\n\n      }\n    }\n\n  }\n\n  AuthService.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.RequsetHandlerService), i0.ɵɵinject(i3.Router), i0.ɵɵinject(i4.EventDetailsService));\n  };\n\n  AuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n  return AuthService;\n})();","map":null,"metadata":{},"sourceType":"module"}